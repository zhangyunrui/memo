### 基本运行过程
- 客户端向服务器端索要公钥，用公钥加密后发给服务端。但是会遇到两问题：
  - 如何保证公钥不被篡改：通过数字证书获取公钥
  - 公钥加密计算量太大：每一次对话（session），都会产生一个对话密钥（session key），对话密钥是对称密钥，用来对报文进行加密。而服务器公钥只用于加密对话密钥
- 基本过程
  - 客户端向服务端索要并验证公钥
  - 双方协商生成对话密钥
  - 双方使用对话密钥进行加密通信
### 握手阶段的详细过程
- ClientHello
  - 一个客户端生成的随机数，稍后用于生成对话密钥
  - 支持的协议版本（TLS 1.0）、加密方法（RSA）、压缩方法
- ServerHello
  - 一个服务器端生成的随机数，稍后用于生成对话密钥
  - 确认协议版本、加密方法、压缩方法
- 客户端回应：收到服务端回应后首先验证服务器证书。如果证书不是可信机构颁布、或者证书中的域名与实际域名不一致、或者证书已经过期，就会向访问者显示一个警告，由其选择是否还要继续通信。如果证书没有问题，客户端就会从证书中取出服务器的公钥
  - 一个随机数。该随机数用服务器公钥加密，防止被窃听
  - 编码改变通知，表示随后的信息都将用双方商定的加密方法和密钥发送
  - 客户端握手结束通知，表示客户端的握手阶段已经结束。这一项同时也是前面发送的所有内容的hash值，用来供服务器校验
- 服务端回应：
  - 编码改变通知，表示随后的信息都将用双方商定的加密方法和密钥发送
  - 服务器握手结束通知，表示服务器的握手阶段已经结束。这一项同时也是前面发送的所有内容的hash值，用来供客户端校验




